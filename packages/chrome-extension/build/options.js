(()=>{"use strict";window.onload=()=>{const e=document.querySelector("form"),t=document.querySelector(".error");e.addEventListener("submit",o=>{o.preventDefault();const r=new FormData(e);for(const e of r.entries())console.log(`${e[0]}, ${e[1]}`);chrome.storage.sync.set({newBookmarkWindowBehaviour:r.get("new-bookmark-window-behaviour"),otterInstanceUrl:r.get("url")}),chrome.action.setBadgeText({text:""}),t.setAttribute("hidden",!0)});const o=document.querySelector("#url");chrome.storage.sync.get("otterInstanceUrl",({otterInstanceUrl:e})=>{o.value=e}),(async()=>{const{otterInstanceUrl:e}=await chrome.storage.sync.get("otterInstanceUrl"),{newBookmarkWindowBehaviour:t}=await chrome.storage.sync.get("newBookmarkWindowBehaviour");return{newBookmarkWindowBehaviour:t,otterInstanceUrl:e}})().then(({otterInstanceUrl:e})=>{e?t.setAttribute("hidden",!0):t.removeAttribute("hidden")})}})();